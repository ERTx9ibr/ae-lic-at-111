# 🎯 快速开始指南

## 📁 项目文件说明

```
ae-lic-at/
├── server.js           # ⭐ 服务器端主程序（部署到 Render.com）
├── atysaee.js         # ⭐ 客户端激活界面（集成到你的 AE 插件）
├── admin-tool.js      # 🛠️ 激活码管理工具
├── test-demo.html     # 🧪 激活界面演示页面
├── package.json       # 📦 项目依赖配置
├── README.md          # 📖 完整文档
├── DEPLOY.md          # 🚀 部署指南
└── 快速开始.md        # 📝 本文件
```

## 🚀 三步完成部署

### 第一步：部署服务器到 Render.com

1. **推送代码到 GitHub**
   ```bash
   git init
   git add .
   git commit -m "AE License Server"
   git remote add origin https://github.com/你的用户名/仓库名.git
   git push -u origin main
   ```

2. **在 Render.com 创建服务**
   - 访问 https://render.com
   - 点击 "New +" → "Web Service"
   - 选择你的 GitHub 仓库
   - 配置：
     - Build Command: `npm install`
     - Start Command: `npm start`
     - Environment: `Node`

3. **设置环境变量**（在 Render.com 的 Environment 设置中）
   ```
   SECRET_KEY=你的密钥（建议30位以上随机字符串）
   ADMIN_KEY=你的管理密钥（建议30位以上随机字符串）
   ```

4. **等待部署完成**（约 2-5 分钟）
   - 获取服务器地址：`https://xxx.onrender.com`

### 第二步：配置客户端

打开 `atysaee.js`，修改第 423 行：

```javascript
// 修改前：
const LICENSE_SERVER = 'https://your-server.onrender.com';

// 修改后：
const LICENSE_SERVER = 'https://你的实际地址.onrender.com';
```

### 第三步：生成激活码

**方法 1：使用浏览器**

访问：`https://你的服务器地址.onrender.com/gen/user001`

**方法 2：使用管理工具**

```bash
npm install node-fetch
export SERVER_URL=https://你的服务器地址.onrender.com
export ADMIN_KEY=你的管理员密钥
node admin-tool.js
```

选择 "2. 批量生成激活码"，输入数量即可。

**方法 3：使用 API**

```bash
curl https://你的服务器地址.onrender.com/gen/test001
```

## 🎮 测试激活功能

### 方法 1：使用演示页面

1. 在浏览器中打开 `test-demo.html`
2. 点击 "打开激活界面"
3. 输入激活码
4. 点击 "立即激活"

### 方法 2：集成到你的项目

在你的 HTML 文件中引入：

```html
<script src="atysaee.js"></script>
```

激活界面会在用户首次使用时自动弹出！

## 📊 管理激活码

### 查看所有激活码

```bash
node admin-tool.js
# 选择 "6. 列出所有激活码"
```

或使用 API：

```bash
curl -X POST https://你的服务器.onrender.com/admin/list \
  -H "Content-Type: application/json" \
  -d '{"adminKey": "你的管理员密钥", "page": 1}'
```

### 查询单个激活码状态

```bash
curl -X POST https://你的服务器.onrender.com/admin/check \
  -H "Content-Type: application/json" \
  -d '{"code": "ABC123", "adminKey": "你的管理员密钥"}'
```

### 解绑激活码（允许重新激活）

```bash
curl -X POST https://你的服务器.onrender.com/unbind \
  -H "Content-Type: application/json" \
  -d '{"code": "ABC123", "adminKey": "你的管理员密钥"}'
```

### 删除激活码

```bash
curl -X POST https://你的服务器.onrender.com/admin/delete \
  -H "Content-Type: application/json" \
  -d '{"code": "ABC123", "adminKey": "你的管理员密钥"}'
```

### 查看统计信息

```bash
curl https://你的服务器.onrender.com/stats
```

## 🔧 常用操作

### 批量生成 100 个激活码

```bash
curl -X POST https://你的服务器.onrender.com/gen/batch \
  -H "Content-Type: application/json" \
  -d '{
    "count": 100,
    "adminKey": "你的管理员密钥"
  }' > codes.json
```

激活码会保存在 `codes.json` 文件中。

### 将激活码导出到文本文件

```bash
curl -X POST https://你的服务器.onrender.com/gen/batch \
  -H "Content-Type: application/json" \
  -d '{"count": 50, "adminKey": "你的管理员密钥"}' \
  | jq -r '.codes[]' > 激活码列表.txt
```

需要安装 `jq` 工具（用于解析 JSON）。

### 本地测试服务器

```bash
# 启动服务器
npm start

# 在另一个终端测试
curl http://localhost:3000/gen/test001
```

## 💡 使用技巧

### 1. 激活码命名规则

生成激活码时，可以使用有意义的种子值：

```bash
# 按用户名生成
curl https://服务器/gen/user_张三

# 按日期生成
curl https://服务器/gen/2025-01-15

# 按订单号生成
curl https://服务器/gen/order_12345
```

### 2. 批量操作脚本

创建 `generate-codes.sh`：

```bash
#!/bin/bash
for i in {1..10}; do
  curl "https://你的服务器.onrender.com/gen/user$i"
  echo ""
done
```

### 3. 监控服务器状态

使用 [Uptime Robot](https://uptimerobot.com) 监控服务器：
- 每 5 分钟 ping 一次服务器
- 防止 Render.com 免费套餐休眠
- 服务异常时发送邮件通知

### 4. 定期备份数据库

```bash
# 下载数据库文件（如果可以访问 Render.com shell）
# 或者导出所有激活码
curl -X POST https://服务器/admin/list \
  -H "Content-Type: application/json" \
  -d '{"adminKey": "密钥", "page": 1, "limit": 1000}' \
  > backup-$(date +%Y%m%d).json
```

## ⚠️ 重要提示

### 安全建议

1. **不要泄露管理员密钥**：管理员密钥可以操作所有激活码
2. **使用强密钥**：至少 30 位随机字符串
3. **定期更换密钥**：建议每季度更换一次
4. **监控异常请求**：关注 Render.com 日志

### Render.com 免费套餐限制

- ⏰ 15 分钟无活动后休眠
- 🚀 首次唤醒需要 10-30 秒
- ⏳ 每月 750 小时免费时间
- 💾 文件系统不保证持久化

### 升级建议

如果你的用户量较大，建议：
1. 升级 Render.com 付费套餐（$7/月起）
2. 使用外部数据库（PostgreSQL）
3. 启用 CDN 加速
4. 添加速率限制防止滥用

## 📚 更多信息

- **完整文档**：查看 `README.md`
- **部署指南**：查看 `DEPLOY.md`
- **API 文档**：查看 `README.md` 中的 API 接口部分
- **问题反馈**：查看项目仓库的 Issues

## 🎉 完成！

现在你已经拥有一个完整的激活码系统：

✅ 服务器运行在云端
✅ 激活界面精美好看
✅ 一机一码自动绑定
✅ 管理工具方便易用

接下来就可以：
1. 生成激活码分发给用户
2. 将 `atysaee.js` 集成到你的 AE 插件
3. 监控激活情况
4. 根据需求扩展功能

**祝你使用愉快！** 🚀

