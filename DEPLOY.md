# ğŸš€ Render.com å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ä»£ç 

### 1.1 åˆå§‹åŒ– Git ä»“åº“ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

```bash
cd /Users/ert888/Desktop/ae-lic-at
git init
git add .
git commit -m "Initial commit: AE License Server"
```

### 1.2 æ¨é€åˆ°è¿œç¨‹ä»“åº“

åˆ›å»ºä¸€ä¸ªæ–°çš„ GitHub ä»“åº“ï¼Œç„¶åï¼š

```bash
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å.git
git branch -M main
git push -u origin main
```

## ç¬¬äºŒæ­¥ï¼šåœ¨ Render.com éƒ¨ç½²

### 2.1 æ³¨å†Œ/ç™»å½• Render.com

è®¿é—® [https://render.com](https://render.com) å¹¶ç™»å½•

### 2.2 åˆ›å»ºæ–°çš„ Web Service

1. ç‚¹å‡» Dashboard ä¸­çš„ **"New +"** æŒ‰é’®
2. é€‰æ‹© **"Web Service"**
3. è¿æ¥ä½ çš„ GitHub è´¦å·ï¼ˆå¦‚æœè¿˜æ²¡è¿æ¥ï¼‰
4. é€‰æ‹©ä½ åˆšæ‰æ¨é€çš„ä»“åº“

### 2.3 é…ç½®æœåŠ¡

å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| Name | `ae-license-server` | æœåŠ¡åç§°ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ |
| Region | `Singapore` æˆ–æœ€è¿‘çš„åŒºåŸŸ | é€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡å™¨ |
| Branch | `main` | Git åˆ†æ”¯ |
| Root Directory | ç•™ç©º | é»˜è®¤æ ¹ç›®å½• |
| Environment | `Node` | è¿è¡Œç¯å¢ƒ |
| Build Command | `npm install` | æ„å»ºå‘½ä»¤ |
| Start Command | `npm start` | å¯åŠ¨å‘½ä»¤ |
| Instance Type | `Free` | å…è´¹å¥—é¤ |

### 2.4 è®¾ç½®ç¯å¢ƒå˜é‡

ç‚¹å‡» **"Advanced"**ï¼Œç„¶åæ·»åŠ ç¯å¢ƒå˜é‡ï¼š

```
SECRET_KEY=ä½ çš„éšæœºå¯†é’¥_å»ºè®®30ä½ä»¥ä¸Š
ADMIN_KEY=ä½ çš„ç®¡ç†å‘˜å¯†é’¥_å»ºè®®30ä½ä»¥ä¸Š
```

> ğŸ’¡ **æç¤º**ï¼šå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆéšæœºå¯†é’¥ï¼š
> ```bash
> node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
> ```

### 2.5 éƒ¨ç½²

1. ç‚¹å‡» **"Create Web Service"**
2. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆçº¦ 2-5 åˆ†é’Ÿï¼‰
3. éƒ¨ç½²æˆåŠŸåï¼Œä½ ä¼šçœ‹åˆ°æœåŠ¡åœ°å€ï¼Œä¾‹å¦‚ï¼š
   ```
   https://ae-license-server.onrender.com
   ```

## ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•æœåŠ¡å™¨

### 3.1 æµ‹è¯•æœåŠ¡å™¨çŠ¶æ€

```bash
curl https://ä½ çš„æœåŠ¡å™¨åœ°å€.onrender.com/
```

åº”è¯¥è¿”å›ï¼š
```json
{
  "status": "running",
  "service": "AE License Server",
  "version": "1.0.0",
  "timestamp": "..."
}
```

### 3.2 ç”Ÿæˆæµ‹è¯•æ¿€æ´»ç 

```bash
curl https://ä½ çš„æœåŠ¡å™¨åœ°å€.onrender.com/gen/test001
```

è¿”å›ç¤ºä¾‹ï¼š
```json
{
  "seed": "test001",
  "code": "ABC1234567",
  "message": "æ¿€æ´»ç ç”ŸæˆæˆåŠŸ"
}
```

## ç¬¬å››æ­¥ï¼šé…ç½®å®¢æˆ·ç«¯

### 4.1 ä¿®æ”¹ atysaee.js

æ‰“å¼€ `atysaee.js` æ–‡ä»¶ï¼Œæ‰¾åˆ°ç¬¬ 423 è¡Œå·¦å³ï¼š

```javascript
const LICENSE_SERVER = 'https://your-server.onrender.com';
```

æ”¹ä¸ºï¼š

```javascript
const LICENSE_SERVER = 'https://ä½ çš„å®é™…æœåŠ¡å™¨åœ°å€.onrender.com';
```

### 4.2 æµ‹è¯•æ¿€æ´»ç•Œé¢

æ‰“å¼€ `test-demo.html` æ–‡ä»¶ï¼š

1. ç‚¹å‡»"æ‰“å¼€æ¿€æ´»ç•Œé¢"æŒ‰é’®
2. è¾“å…¥åˆšæ‰ç”Ÿæˆçš„æ¿€æ´»ç 
3. ç‚¹å‡»"ç«‹å³æ¿€æ´»"
4. å¦‚æœçœ‹åˆ°"æ¿€æ´»æˆåŠŸ"ï¼Œè¯´æ˜ä¸€åˆ‡æ­£å¸¸ï¼

## ç¬¬äº”æ­¥ï¼šä½¿ç”¨ç®¡ç†å·¥å…·

### 5.1 é…ç½®ç®¡ç†å·¥å…·

è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
export SERVER_URL=https://ä½ çš„æœåŠ¡å™¨åœ°å€.onrender.com
export ADMIN_KEY=ä½ è®¾ç½®çš„ç®¡ç†å‘˜å¯†é’¥
```

æˆ–è€…ç›´æ¥åœ¨å‘½ä»¤ä¸­ä½¿ç”¨ã€‚

### 5.2 è¿è¡Œç®¡ç†å·¥å…·

```bash
cd /Users/ert888/Desktop/ae-lic-at
npm install node-fetch
node admin-tool.js
```

è¿™å°†å¯åŠ¨äº¤äº’å¼ç®¡ç†ç•Œé¢ï¼Œä½ å¯ä»¥ï¼š
- ç”Ÿæˆæ¿€æ´»ç ï¼ˆå•ä¸ª/æ‰¹é‡ï¼‰
- æŸ¥è¯¢æ¿€æ´»ç çŠ¶æ€
- è§£ç»‘æ¿€æ´»ç 
- åˆ é™¤æ¿€æ´»ç 
- æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

### 5.3 æ‰¹é‡ç”Ÿæˆæ¿€æ´»ç 

ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ APIï¼š

```bash
curl -X POST https://ä½ çš„æœåŠ¡å™¨åœ°å€.onrender.com/gen/batch \
  -H "Content-Type: application/json" \
  -d '{
    "count": 10,
    "adminKey": "ä½ çš„ç®¡ç†å‘˜å¯†é’¥"
  }'
```

## å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²åè®¿é—®å¾ˆæ…¢æˆ–è¶…æ—¶ï¼Ÿ

**A**: Render.com å…è´¹å¥—é¤åœ¨ 15 åˆ†é’Ÿæ— æ´»åŠ¨åä¼šä¼‘çœ ï¼Œé¦–æ¬¡è®¿é—®éœ€è¦ç­‰å¾… 10-30 ç§’å”¤é†’ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å‡çº§åˆ°ä»˜è´¹å¥—é¤ï¼ˆ$7/æœˆèµ·ï¼‰
2. ä½¿ç”¨ Uptime Robot ç­‰æœåŠ¡å®šæœŸ ping ä½ çš„æœåŠ¡å™¨ä¿æŒæ´»è·ƒ
3. ä½¿ç”¨å…¶ä»–ä¸ä¼‘çœ çš„æ‰˜ç®¡æœåŠ¡

### Q2: æ¿€æ´»åé‡å¯ç”µè„‘/æ¸…ç†æµè§ˆå™¨ï¼Œæ¿€æ´»å¤±æ•ˆï¼Ÿ

**A**: æœºå™¨ç æ˜¯åŸºäºæµè§ˆå™¨æŒ‡çº¹ç”Ÿæˆçš„ï¼Œæ¸…ç†æµè§ˆå™¨æ•°æ®ä¼šæ”¹å˜æŒ‡çº¹ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æç¤ºç”¨æˆ·ä¸è¦æ¸…ç†æµè§ˆå™¨æ•°æ®
2. ä½¿ç”¨ç®¡ç†å‘˜æ¥å£è§£ç»‘åé‡æ–°æ¿€æ´»
3. æ”¹è¿›æœºå™¨ç ç”Ÿæˆé€»è¾‘ï¼Œä½¿ç”¨æ›´ç¨³å®šçš„ç‰¹å¾

### Q3: æ•°æ®åº“æ•°æ®ä¸¢å¤±ï¼Ÿ

**A**: Render.com å…è´¹å¥—é¤ä¸ä¿è¯æ–‡ä»¶ç³»ç»ŸæŒä¹…åŒ–ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å‡çº§åˆ°ä»˜è´¹å¥—é¤
2. ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“ï¼ˆPostgreSQLã€MongoDBï¼‰
3. å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶

### Q4: CORS é”™è¯¯ï¼Ÿ

**A**: æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£ç¡®é…ç½®äº† CORSã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
æœåŠ¡å™¨å·²ç»é…ç½®äº† `Access-Control-Allow-Origin: *`ï¼Œå¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ï¼š
1. æµè§ˆå™¨æ§åˆ¶å°çš„å…·ä½“é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ
3. ç¡®è®¤å®¢æˆ·ç«¯åœ°å€æ­£ç¡®

## è¿›é˜¶é…ç½®

### é™åˆ¶ CORS æ¥æºï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰

åœ¨ `server.js` ä¸­ä¿®æ”¹ï¼š

```javascript
app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', 'https://ä½ çš„åŸŸå.com');
  // ... å…¶ä»–é…ç½®
});
```

### ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“

å¦‚æœéœ€è¦æŒä¹…åŒ–æ•°æ®ï¼Œå¯ä»¥ï¼š

1. åœ¨ Render.com åˆ›å»º PostgreSQL æ•°æ®åº“
2. å®‰è£… `pg` åŒ…ï¼š`npm install pg`
3. ä¿®æ”¹ `server.js` ä½¿ç”¨ PostgreSQL

### æ·»åŠ æ—¥å¿—è®°å½•

å®‰è£… Winston æˆ– Morganï¼š

```bash
npm install winston morgan
```

ç„¶ååœ¨ `server.js` ä¸­æ·»åŠ æ—¥å¿—ä¸­é—´ä»¶ã€‚

### æ·»åŠ é€Ÿç‡é™åˆ¶

é˜²æ­¢æš´åŠ›ç ´è§£ï¼š

```bash
npm install express-rate-limit
```

```javascript
const rateLimit = require('express-rate-limit');

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
  max: 100 // æœ€å¤š100æ¬¡è¯·æ±‚
});

app.use('/verify', limiter);
```

## ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹æ—¥å¿—

åœ¨ Render.com Dashboard ä¸­ï¼š
1. è¿›å…¥ä½ çš„æœåŠ¡
2. ç‚¹å‡» "Logs" æ ‡ç­¾
3. å®æ—¶æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

### è®¾ç½®å‘Šè­¦

Render.com æä¾›é‚®ä»¶é€šçŸ¥ï¼š
1. è¿›å…¥æœåŠ¡è®¾ç½®
2. é…ç½® "Notifications"
3. è®¾ç½®éƒ¨ç½²å¤±è´¥ã€æœåŠ¡å´©æºƒç­‰å‘Šè­¦

### å®šæœŸæ£€æŸ¥

å»ºè®®æ¯å‘¨æ£€æŸ¥ï¼š
- æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€
- æ¿€æ´»ç ä½¿ç”¨æƒ…å†µ
- æ•°æ®åº“å¤‡ä»½
- æ—¥å¿—ä¸­çš„å¼‚å¸¸

## ä¸‹ä¸€æ­¥

âœ… æœåŠ¡å™¨å·²éƒ¨ç½²
âœ… å®¢æˆ·ç«¯å·²é…ç½®
âœ… ç®¡ç†å·¥å…·å¯ç”¨

ç°åœ¨ä½ å¯ä»¥ï¼š
1. ğŸ“¤ åˆ†å‘æ¿€æ´»ç ç»™ç”¨æˆ·
2. ğŸ“Š ç›‘æ§æ¿€æ´»æƒ…å†µ
3. ğŸ”§ æ ¹æ®éœ€æ±‚è°ƒæ•´é…ç½®
4. ğŸš€ é›†æˆåˆ°ä½ çš„ AE æ’ä»¶ä¸­

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ `README.md` ä¸­çš„å®Œæ•´æ–‡æ¡£ã€‚

